<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Agency - Booking</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Travel Dreams</h1>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="packages.html">Packages</a></li>
                    <li><a href="booking.html" class="active">Booking</a></li>
                    <li><a href="gallery.html">Gallery</a></li>
                    <li><a href="about.html">About Us</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="container">
            <h2>Book Your Trip</h2>
            <form id="booking-form" action="#" method="post">
                <label for="name">Full Name:</label>
                <input type="text" id="name" name="name" required>
                <div id="name-error" class="error"></div>

                <label for="email">Email:</label>
                <input type="text" id="email" name="email" required>
                <div id="email-error" class="error"></div>

                <label for="destination">Destination:</label>
                <select id="destination" name="destination" required>
                    <option value="">--Select a Destination--</option>
                    <option value="swiss_alps">Swiss Alps, Switzerland</option>
                    <option value="maui">Maui, Hawaii</option>
                    <option value="sahara">Sahara, Morocco</option>
                    <option value="kyoto">Kyoto, Japan</option>
                </select>

                <label for="package">Package Selection:</label>
                <select id="package" name="package" required>
                    <option value="">--Select a Package--</option>
                    <option value="mountain_escape">Mountain Escape</option>
                    <option value="tropical_paradise">Tropical Paradise</option>
                    <option value="desert_adventure">Desert Adventure</option>
                    <option value="city_explorer">City Explorer</option>
                </select>

                <label for="guests">Number of Guests:</label>
                <input type="number" id="guests" name="guests" min="1" max="10" value="1" required>

                <label for="check_in">Check-in Date:</label>
                <input type="date" id="check_in" name="check_in" required>

                <label for="check_out">Check-out Date:</label>
                <input type="date" id="check_out" name="check_out" required>

                <label for="promo_code">Promo Code (optional):</label>
                <input type="text" id="promo_code" name="promo_code">

                <div id="price-estimate" class="price-estimate" style="display: none;">
                    <h3>Price Estimate</h3>
                    <div id="price-breakdown" class="price-breakdown"></div>
                    <div id="final-price" class="final-price"></div>
                </div>

                <input type="submit" value="Submit Booking" id="submit-btn">
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Travel Dreams. All Rights Reserved.</p>
    </footer>

    <script>
        // Package pricing data
        const packagePrices = {
            "mountain_escape": 200000,
            "tropical_paradise": 150000,
            "desert_adventure": 120000,
            "city_explorer": 180000
        };

        // Promo codes and discounts
        const promoDiscounts = {
            "EARLYBIRD": 0.1,    // 10% discount
            "SUMMER25": 0.25,    // 25% discount
            "WELCOME10": 0.1,    // 10% discount
            "FAMILY15": 0.15     // 15% discount
        };

        // Function to calculate nights between dates
        function calculateNights(checkIn, checkOut) {
            const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
            const firstDate = new Date(checkIn);
            const secondDate = new Date(checkOut);
            
            return Math.round(Math.abs((firstDate - secondDate) / oneDay));
        }

        // Function to validate email
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Function to validate form
        function validateForm() {
            let isValid = true;
            
            // Validate name
            const name = document.getElementById('name').value;
            const nameError = document.getElementById('name-error');
            if (name.trim() === '') {
                nameError.textContent = 'Name is required';
                document.getElementById('name').classList.add('invalid');
                isValid = false;
            } else {
                nameError.textContent = '';
                document.getElementById('name').classList.remove('invalid');
            }
            
            // Validate email
            const email = document.getElementById('email').value;
            const emailError = document.getElementById('email-error');
            if (email.trim() === '') {
                emailError.textContent = 'Email is required';
                document.getElementById('email').classList.add('invalid');
                isValid = false;
            } else if (!validateEmail(email)) {
                emailError.textContent = 'Please enter a valid email address';
                document.getElementById('email').classList.add('invalid');
                isValid = false;
            } else {
                emailError.textContent = '';
                document.getElementById('email').classList.remove('invalid');
            }
            
            return isValid;
        }

        // Function to calculate and display price estimate
        function calculatePriceEstimate() {
            const package = document.getElementById('package').value;
            const guests = parseInt(document.getElementById('guests').value);
            const checkIn = document.getElementById('check_in').value;
            const checkOut = document.getElementById('check_out').value;
            const promoCode = document.getElementById('promo_code').value.toUpperCase();
            
            if (!package || !checkIn || !checkOut) {
                document.getElementById('price-estimate').style.display = 'none';
                return;
            }
            
            const basePrice = packagePrices[package];
            const nights = calculateNights(checkIn, checkOut);
            
            if (nights <= 0) {
                document.getElementById('price-estimate').style.display = 'none';
                return;
            }
            
            let total = basePrice;
            
            // Guests multiplier
            let guestMultiplier = 1;
            if (guests > 2) {
                guestMultiplier = 1 + (guests - 2) * 0.2; // +20% for each guest beyond 2
            }
            total *= guestMultiplier;
            
            // Promo code discount
            let discount = 0;
            if (promoCode && promoDiscounts[promoCode]) {
                discount = promoDiscounts[promoCode];
                total *= (1 - discount);
            }
            
            // Display price breakdown
            const priceBreakdown = document.getElementById('price-breakdown');
            priceBreakdown.innerHTML = `
                <p>Base Price: Rs ${basePrice.toLocaleString()}</p>
                <p>Nights: ${nights}</p>
                <p>Guests: ${guests} (${guestMultiplier > 1 ? `+${Math.round((guestMultiplier - 1) * 100)}%` : 'no extra charge'})</p>
                ${discount > 0 ? `<p>Promo Code: ${promoCode} (-${discount * 100}%)</p>` : ''}
            `;
            
            const finalPrice = document.getElementById('final-price');
            finalPrice.textContent = `Estimated Total: Rs ${Math.round(total).toLocaleString()}`;
            
            document.getElementById('price-estimate').style.display = 'block';
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation highlight
            const currentPage = window.location.pathname.split('/').pop() || 'booking.html';
            const navLinks = document.querySelectorAll('header nav a');
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });
            
            // Set minimum date for check-in to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('check_in').min = today;
            
            // Update min date for check-out when check-in changes
            document.getElementById('check_in').addEventListener('change', function() {
                document.getElementById('check_out').min = this.value;
                calculatePriceEstimate();
            });
            
            // Add event listeners for price calculation
            document.getElementById('package').addEventListener('change', calculatePriceEstimate);
            document.getElementById('guests').addEventListener('change', calculatePriceEstimate);
            document.getElementById('check_out').addEventListener('change', calculatePriceEstimate);
            document.getElementById('promo_code').addEventListener('input', calculatePriceEstimate);
            
            // Form validation
            document.getElementById('booking-form').addEventListener('submit', function(e) {
                if (!validateForm()) {
                    e.preventDefault();
                }
            });
            
            // Real-time validation
            document.getElementById('name').addEventListener('input', validateForm);
            document.getElementById('email').addEventListener('input', validateForm);
        });
    </script>
</body>
</html>